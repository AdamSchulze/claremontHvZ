{% extends "base.html" %}

{% block colorScheme %}/media/css/concrete-blood.css{% endblock %}

{% block greeting %}
  Welcome, {{ first_name|default:"Player" }}!
{% endblock %}


{% block morehead %}
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
	google.load("visualization", "1", {packages:["corechart"]});
	google.setOnLoadCallback(drawAll);
	function drawChart(id,name,humans,zombies) {
		var data = new google.visualization.DataTable();
			data.addColumn('string', 'Team');
			data.addColumn('number', 'Players');
			data.addRows([
				['Humans',    humans],
				['Zombies',   zombies],
			]);

			var options = {
				width: 325, height: 250,
				title: name,
				slices: [{color: 'pink', color: 'green'}]
			};

			var chart = new google.visualization.PieChart(document.getElementById('graph_'+id));
			chart.draw(data, options);
	}

	function drawAll() {
{% for d in data %}
		drawChart({{ d.id }}, '{{ d.name }}', {{ d.humans }}, {{ d.zombies }});
{% endfor %}
	}

</script>
{% endblock %}

{% block content %}
{% for d in data %}
	<div id="graph_{{ d.id }}" {% if forloop.last %} style="float:none;" {% else %} style="float:none;" {% endif %}></div>
{% endfor %}
{% endblock %}