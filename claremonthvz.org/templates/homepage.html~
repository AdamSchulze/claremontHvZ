{% extends "base.html" %}

{% block colorScheme %}/media/css/concrete-blood.css{% endblock %}

{% block greeting %}
  Welcome, {{ first_name|default:"Player" }}!
{% endblock %}

{% block morehead %}
	<link rel="stylesheet" type="text/css" href="/media/css/jquery.dataTables.css" />
	<script type="text/javascript" src="/media/js/jquery.dataTables.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<!--script type="text/javascript">
		google.load("visualization", "1", {packages:["corechart"]});
		function drawChart() {
		var data = new google.visualization.DataTable();
			data.addColumn('string', 'Team');
			data.addColumn('number', 'Players');
			data.addRows([
				['Humans',    {{ humans }}],
				['Zombies',   {{ zombies }}],
			]);

			var options = {
				width: 325, height: 250,
				title: 'All Schools',
				slices: [{color: 'pink', color: 'green'}]
			};

			var chart = new google.visualization.PieChart(document.getElementById('all_players'));
			chart.draw(data, options);
		}

			var options = {
				width: 325, height: 250,
				title: team+'s By '+grouping,
				slices: [{color: 'pink', color: 'green'}]
			};

			var chart = new google.visualization.PieChart(document.getElementById(team+'_by_'+grouping));
			chart.draw(data, options);
		}

		$(document).ready(function() {
			drawChart();
		});

	</script-->

	<script type="text/javascript">
		function load_mission(id) {
			$.ajax({
				type: "GET",
				url: "/mission/"+id,
				dataType: "json",
				success: function(data){
					$(".fademe").fadeOut('slow',function(){
						$("#m_title").html(data["title"]);
						$("#m_day").html(data["day"]);
						$("#m_kind").html(data["kind"]);
						$("#m_result").html(data["result"]);
						$("#m_story").html(data["story"]);
						$("#m_goals").html(data["goals"]);
						$("#m_rules").html(data["rules"]);
						$("#m_reward").html(data["reward"]);
                        // Turn on or off the title based on whether or not it
                        // has data
                        $("#h_story").html((data["story"] == "") ? '' : "Story");
                        $("#h_goals").html((data["goals"] == "") ? '' : "Goals");
                        $("#h_rules").html((data["rules"] == "") ? '' : "Special Rules");
                        $("#h_reward").html((data["reward"] == "") ? '' : "Reward");
					});
					$(".fademe").fadeIn('slow');
				}
			});
		}

	google.load("visualization", "1", {packages:["corechart"]});

		function drawChart() {
		var data = new google.visualization.DataTable();
			data.addColumn('string', 'Team');
			data.addColumn('number', 'Players');
			data.addRows([
				['Humans',    {{ humans }}],
				['Zombies',   {{ zombies }}],
			]);

			var options = {
				width: 325, height: 250,
				title: 'All Schools',
				slices: [{color: 'pink', color: 'green'}]
			};

			var chart = new google.visualization.PieChart(document.getElementById('all_players'));
			chart.draw(data, options);
		}

		$(document).ready(function() {
		        $('#missionList').dataTable({
				"aaSorting": [[4,'desc'],[5,'asc']],
				"aoColumns": [
					/* Title */ null,
					/* Day */ { "bVisible": false },
					/* Kind */ { "bVisible": false },
					/* Result */ { "bVisible": false },
					/* Pretty Day */ { "iDataSort": 1 },
					/* Pretty Kind */ { "iDataSort": 2 },
					/* Pretty Result */ null
				],
				"bPaginate": false,
				"bFilter": false,
				"bSort": true,
				"bInfo": false,
				"bAutoWidth": true,
				"sScrollY": "400px",
				"sDom": "frtiS",
				"bDeferRender": true
			});
			$('#missionList a:first').click();
		});
	</script>
{% endblock %}

{% block content %}

	<div id="left" style="width:400px;">
			<h2 id="m_title" class="fademe"></h2>
			<ul>
				<li>Day: <span id="m_day" class="fademe"></span></li>
				<li>Kind: <span id="m_kind" class="fademe"></span></li>
				<li>Result: <span id="m_result" class="fademe"></span></li>
			</ul>
			<h3 id="h_story">Story</h3>
			<div id="m_story" class="fademe"></div>
			<h3 id="h_goals">Goals</h3>
			<div id="m_goals" class="fademe"></div>
			<h3 id="h_rules">Special Rules</h3>
			<div id="m_rules" class="fademe"></div>
			<h3 id="h_reward">Reward</h3>
			<div id="m_reward" class="fademe"></div>
	<div id="right" style="width:400px;float=left;">
	  <h2>Graphs</h2>
	    <table>
		<tr>
			<td><div id="all_players"></div></td>
		</tr>
	    </table>

	</div>

{% endblock %}
